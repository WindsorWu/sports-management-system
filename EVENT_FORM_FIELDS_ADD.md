# 赛事管理添加报名时间字段

## 修改内容

### 在表单中添加报名时间输入

**文件**: `frontend/src/views/admin/Events.vue`

**新增字段**:
1. **报名开始时间** (`registration_start`)
2. **报名结束时间** (`registration_end`)
3. **联系人** (`contact_person`)
4. **联系电话** (`contact_phone`)

### 表单布局

```vue
<el-form-item label="比赛时间" prop="event_time">
  <el-date-picker v-model="form.event_time" ... />
</el-form-item>

<!-- ✅ 新增：报名时间范围 -->
<el-form-item label="报名时间">
  <el-col :span="11">
    <el-date-picker
      v-model="form.registration_start"
      type="datetime"
      placeholder="报名开始时间"
    />
  </el-col>
  <el-col :span="2" style="text-align: center;">至</el-col>
  <el-col :span="11">
    <el-date-picker
      v-model="form.registration_end"
      type="datetime"
      placeholder="报名结束时间"
    />
  </el-col>
</el-form-item>

<!-- ✅ 新增：联系人 -->
<el-form-item label="联系人">
  <el-input v-model="form.contact_person" />
</el-form-item>

<!-- ✅ 新增：联系电话 -->
<el-form-item label="联系电话">
  <el-input v-model="form.contact_phone" />
</el-form-item>

<el-form-item label="参赛地点" prop="location">
  <el-input v-model="form.location" />
</el-form-item>
```

---

## 功能说明

### 报名时间设置

**场景1: 手动设置报名时间**
- 管理员可以自定义报名开始和结束时间
- 如：比赛时间是5月1日，报名时间可以设置为4月1日-4月25日

**场景2: 不设置报名时间**
- 留空即可
- 系统会自动使用比赛时间作为默认值

**智能默认值**:
- 如果未填写 `registration_start` → 使用 `event_time`
- 如果未填写 `registration_end` → 使用 `event_time`

### 联系方式设置

**场景1: 设置联系方式**
- 填写联系人和电话
- 用户可以通过这些信息咨询

**场景2: 不设置**
- 系统使用默认值
- 联系人: "管理员"
- 联系电话: "13800138000"

---

## 使用方法

### 创建赛事时设置报名时间

1. 点击"新增赛事"

2. 填写基本信息
   - 赛事名称: `春季运动会`
   - 比赛时间: `2024-05-15 09:00`
   - 参赛地点: `体育场`
   - 详情介绍: `欢迎参加`

3. **设置报名时间** ✅
   - 报名开始时间: `2024-04-01 00:00`
   - 报名结束时间: `2024-04-30 23:59`

4. **设置联系方式** ✅
   - 联系人: `张老师`
   - 联系电话: `13812345678`

5. 选择状态并提交

### 编辑赛事修改报名时间

1. 找到已创建的赛事

2. 点击"编辑"按钮

3. **修改报名时间** ✅
   - 可以调整报名开始时间
   - 可以调整报名结束时间

4. 点击"确定"保存

---

## 表单字段完整列表

### 当前表单包含的所有字段

| 字段 | 标签 | 类型 | 是否必填 |
|------|------|------|----------|
| `name` | 赛事名称 | 文本输入 | ✅ |
| `image` | 赛事图片 | 图片上传 | ❌ |
| `event_time` | 比赛时间 | 日期时间 | ✅ |
| `registration_start` | 报名开始 | 日期时间 | ❌（有默认值）|
| `registration_end` | 报名结束 | 日期时间 | ❌（有默认值）|
| `contact_person` | 联系人 | 文本输入 | ❌（有默认值）|
| `contact_phone` | 联系电话 | 文本输入 | ❌（有默认值）|
| `location` | 参赛地点 | 文本输入 | ✅ |
| `description` | 详情介绍 | 文本域 | ❌ |
| `status` | 状态 | 下拉选择 | ✅ |

---

## 测试步骤

1. **刷新页面** (F5)

2. **访问赛事管理**
   ```
   http://localhost:5173/admin/events
   ```

3. **点击"新增赛事"**

4. **查看表单** - 现在应该能看到：
   - ✅ 赛事名称输入框
   - ✅ 图片上传
   - ✅ 比赛时间选择器
   - ✅ **报名时间范围选择器**（新增）
   - ✅ **联系人输入框**（新增）
   - ✅ **联系电话输入框**（新增）
   - ✅ 参赛地点输入框
   - ✅ 详情介绍文本域
   - ✅ 状态下拉选择

5. **测试填写**
   - 设置不同的报名时间和比赛时间
   - 填写联系人和电话
   - 点击提交
   - ✅ 创建成功

6. **测试编辑**
   - 点击已有赛事的"编辑"
   - ✅ 报名时间正确回填
   - ✅ 可以修改报名时间
   - ✅ 保存成功

---

## 业务逻辑

### 报名时间与比赛时间的关系

**合理的时间设置**:
```
报名开始 < 报名结束 <= 比赛开始 < 比赛结束
```

**示例**:
- 比赛时间: 2024-05-15 09:00 - 17:00
- 报名时间: 2024-04-01 00:00 - 2024-05-10 23:59
- 这样给用户5天的缓冲时间准备

**如果不设置报名时间**:
- 系统自动使用比赛时间
- 意味着只要比赛没开始就可以报名

---

## 修复状态

| 功能 | 状态 |
|------|------|
| 报名时间显示 | ✅ 已添加 |
| 报名时间编辑 | ✅ 可用 |
| 联系方式显示 | ✅ 已添加 |
| 联系方式编辑 | ✅ 可用 |
| 创建赛事 | ✅ 可用 |
| 编辑赛事 | ✅ 可用 |
| 删除赛事 | ✅ 可用 |

---

**修复时间**: 2024-01-30
**版本**: v1.0.18
**状态**: ✅ 完成

**总结**: 赛事管理表单已添加报名时间、联系人、联系电话字段。现在管理员可以完整设置和修改赛事的所有信息。刷新页面即可使用。
